name: spacfx-client-python-build

on: 
    workflow_dispatch:
    push:
        branches:
         - main

jobs:
  build-spacefx-client-python-amd64:
    permissions:
      contents: read
      packages: write

    uses: microsoft/azure-orbital-space-sdk-github-actions/.github/workflows/python-app-build.yaml@km/add_build_steps
    with:
      APP_PROJECT:  spacefx
      OUTPUT_DIR: /var/spacedev/tmp/spacesdk-client
      WHEEL_STAGING_DIRECTORY: /var/spacedev/wheel/microsoftazurespacefx
      WHEEL_FILE_PREFIX: microsoftazurespacefx
      ANNOTATION: azure-orbital-space-sdk-client.yaml
      WORKFLOW_AGENT: ubuntu-latest
      ARCHITECTURE: amd64
      BUILD_PYTHON_WHEEL: true
      DOT_NET_PROJECT: ./src/spacesdk-client.csproj
      CONTAINER_NAME: spacesdk-client
    secrets:
      GIT_HUB_USER_NAME: ${{ secrets.GIT_HUB_USER_NAME }}
      GIT_HUB_USER_TOKEN: ${{ secrets.GIT_HUB_USER_TOKEN }}
      SETUP_REPO_URL: ${{ secrets.SETUP_REPO_URL }}

  # build-spacefx-client-python-arm64:
  #   permissions:
  #     contents: read
  #     packages: write

  #   uses: microsoft/azure-orbital-space-sdk-github-actions/.github/workflows/python-app-build.yaml@km/add_build_steps
  #   with:
  #     APP_PROJECT:  spacefx
  #     OUTPUT_DIR: /var/spacedev/tmp/spacesdk-client
  #     WHEEL_STAGING_DIRECTORY: /var/spacedev/wheel/microsoftazurespacefx
  #     WHEEL_FILE_PREFIX: microsoftazurespacefx
  #     ANNOTATION: azure-orbital-space-sdk-client.yaml
  #     WORKFLOW_AGENT: ubuntu-latest
  #     ARCHITECTURE: arm64
  #     BUILD_PYTHON_WHEEL: true
  #   secrets:
  #     GIT_HUB_USER_NAME: ${{ secrets.GIT_HUB_USER_NAME }}
  #     GIT_HUB_USER_TOKEN: ${{ secrets.GIT_HUB_USER_TOKEN }}
  #     SETUP_REPO_URL: ${{ secrets.SETUP_REPO_URL }}